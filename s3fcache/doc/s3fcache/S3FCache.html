<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Tue Mar 26 15:45:23 CET 2024 -->
<title>S3FCache</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2024-03-26">
<meta name="description" content="declaration: package: s3fcache, class: S3FCache">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
<script type="text/javascript" src="../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">s3fcache</a></div>
<h1 title="Class S3FCache" class="title">Class S3FCache&lt;K,<wbr>V&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">s3fcache.S3FCache&lt;K,<wbr>V&gt;</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>K</code> - the type of keys used by this cache.</dd>
<dd><code>V</code> - the type of values stored in the cache.</dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">S3FCache&lt;K,<wbr>V&gt;</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">The main class for the S3FCache, implementing a cache system
 with a three-queue eviction strategy based on the S3-FIFO algorithm.
 This implementation is thread-safe.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">S3FCache</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(int)" class="member-name-link">S3FCache</a><wbr>(int&nbsp;maxQueueSize)</code></div>
<div class="col-last odd-row-color">
<div class="block">Constructs an S3FCache with specified sizes for each queue.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ConcurrentMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentMap</a><wbr>&lt;<a href="S3FCache.html" title="type parameter in S3FCache">K</a>,<wbr><a href="CacheEntry.html" title="class in s3fcache">CacheEntry</a>&lt;<a href="S3FCache.html" title="type parameter in S3FCache">K</a>,<wbr><a href="S3FCache.html" title="type parameter in S3FCache">V</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#asMap()" class="member-name-link">asMap</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a view of the cache as a concurrent map.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#evict()" class="member-name-link">evict</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Evicts an entry from the cache based on the S3-FIFO algorithm.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="S3FCache.html" title="type parameter in S3FCache">V</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#get(K)" class="member-name-link">get</a><wbr>(<a href="S3FCache.html" title="type parameter in S3FCache">K</a>&nbsp;key)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If a key is in the small or big queue.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/HashSet.html" title="class or interface in java.util" class="external-link">HashSet</a><wbr>&lt;<a href="S3FCache.html" title="type parameter in S3FCache">K</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getGhostKeySet()" class="member-name-link">getGhostKeySet</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the set of keys in the ghost queue.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a><wbr>&lt;<a href="S3FCache.html" title="type parameter in S3FCache">K</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getKeys()" class="member-name-link">getKeys</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the set of keys in the cache.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMaxWeight()" class="member-name-link">getMaxWeight</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the max weight for the cache.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#invalidate(K)" class="member-name-link">invalidate</a><wbr>(<a href="S3FCache.html" title="type parameter in S3FCache">K</a>&nbsp;key)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invalidates the cache entry for the specified key.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#invalidateAll()" class="member-name-link">invalidateAll</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invalidates all cache entries.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#invalidateAll(java.lang.Iterable)" class="member-name-link">invalidateAll</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="S3FCache.html" title="type parameter in S3FCache">K</a>&gt;&nbsp;keys)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invalidates the cache entries for the specified keys.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#memorySize()" class="member-name-link">memorySize</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the memory size of the cache.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#put(K,V)" class="member-name-link">put</a><wbr>(<a href="S3FCache.html" title="type parameter in S3FCache">K</a>&nbsp;key,
 <a href="S3FCache.html" title="type parameter in S3FCache">V</a>&nbsp;value)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">New objects are inserted into S if not in G.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#putAll(java.util.Map)" class="member-name-link">putAll</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;? extends <a href="S3FCache.html" title="type parameter in S3FCache">K</a>,<wbr>? extends <a href="S3FCache.html" title="type parameter in S3FCache">V</a>&gt;&nbsp;map)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Copies all the mappings from the specified map to the cache.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setBigQueueSize(int)" class="member-name-link">setBigQueueSize</a><wbr>(int&nbsp;bigQueueSize)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the size of the big queue.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setGhostQueueSize(int)" class="member-name-link">setGhostQueueSize</a><wbr>(int&nbsp;ghostQueueSize)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the size of the ghost queue.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setMaxWeight(int)" class="member-name-link">setMaxWeight</a><wbr>(int&nbsp;maxWeight)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set new max weight for the cache.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setQueueSizes(int,int,int)" class="member-name-link">setQueueSizes</a><wbr>(int&nbsp;bigQueueSize,
 int&nbsp;smallQueueSize,
 int&nbsp;ghostQueueSize)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set custom sizes for the queues.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setSmallQueueSize(int)" class="member-name-link">setSmallQueueSize</a><wbr>(int&nbsp;smallQueueSize)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the size of the small queue.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#size()" class="member-name-link">size</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the number of entries in the cache.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(int)">
<h3>S3FCache</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">S3FCache</span><wbr><span class="parameters">(int&nbsp;maxQueueSize)</span></div>
<div class="block">Constructs an S3FCache with specified sizes for each queue.
 Initializes three concurrent queues to manage cache entries
 in a thread-safe manner.
 Default max weigth is 3.
 Default size is 10.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>maxQueueSize</code> - the maximum size of Big + Small queue.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>S3FCache</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">S3FCache</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="get(K)">
<h3 id="get(java.lang.Object)">get</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="S3FCache.html" title="type parameter in S3FCache">V</a></span>&nbsp;<span class="element-name">get</span><wbr><span class="parameters">(<a href="S3FCache.html" title="type parameter in S3FCache">K</a>&nbsp;key)</span></div>
<div class="block">If a key is in the small or big queue.
 Return if and update the weight of the entry.
 The weight is the min of the weight of the entry + 1 and the max weight.
 If not in the cache, check if the key is in the ghost queue.
 If it is, move it to the big queue and update the weight to 0.
 If not in the cache, return null.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>key</code> - the key to be searched for in the cache.</dd>
<dt>Returns:</dt>
<dd>the value associated with the key, or null if not found.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/NullPointerException.html" title="class or interface in java.lang" class="external-link">NullPointerException</a></code> - if the key is null.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="put(K,V)">
<h3 id="put(java.lang.Object,java.lang.Object)">put</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">put</span><wbr><span class="parameters">(<a href="S3FCache.html" title="type parameter in S3FCache">K</a>&nbsp;key,
 <a href="S3FCache.html" title="type parameter in S3FCache">V</a>&nbsp;value)</span></div>
<div class="block">New objects are inserted into S if not in G.
 Otherwise, it is inserted into M.
 When S is full, the object at the tail is either moved to M if it is accessed more than once or G if not.
 And its access bits are cleared during the move.
 When G is full, it evicts objects in FIFO order.
 M uses an algorithm similar to FIFO-Reinsertion but tracks access information using two bits.
 Objects that have been accessed at least once are reinserted with one bit set to 0 (similar to decreasing frequency by 1).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>key</code> - the key to be associated with the value.</dd>
<dd><code>value</code> - the value to be stored in the cache.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="evict()">
<h3>evict</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">evict</span>()</div>
<div class="block">Evicts an entry from the cache based on the S3-FIFO algorithm.
 If the small queue is not empty, the entry with the lowest weight is evicted.
 If the weight is greater than 1, the weight is set to 0 and the entry is moved to the big queue.
 If the weight is 1, the entry is moved to the ghost queue.
 If the small queue is empty, the entry with the lowest weight is evicted from the big queue.
 The entry is moved to the ghost queue.</div>
</section>
</li>
<li>
<section class="detail" id="asMap()">
<h3>asMap</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ConcurrentMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentMap</a>&lt;<a href="S3FCache.html" title="type parameter in S3FCache">K</a>,<wbr><a href="CacheEntry.html" title="class in s3fcache">CacheEntry</a>&lt;<a href="S3FCache.html" title="type parameter in S3FCache">K</a>,<wbr><a href="S3FCache.html" title="type parameter in S3FCache">V</a>&gt;&gt;</span>&nbsp;<span class="element-name">asMap</span>()</div>
<div class="block">Returns a view of the cache as a concurrent map.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a concurrent map view of the cache.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="invalidate(K)">
<h3 id="invalidate(java.lang.Object)">invalidate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">invalidate</span><wbr><span class="parameters">(<a href="S3FCache.html" title="type parameter in S3FCache">K</a>&nbsp;key)</span></div>
<div class="block">Invalidates the cache entry for the specified key.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>key</code> - the key to be invalidated.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="invalidateAll()">
<h3>invalidateAll</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">invalidateAll</span>()</div>
<div class="block">Invalidates all cache entries.</div>
</section>
</li>
<li>
<section class="detail" id="invalidateAll(java.lang.Iterable)">
<h3>invalidateAll</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">invalidateAll</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="S3FCache.html" title="type parameter in S3FCache">K</a>&gt;&nbsp;keys)</span></div>
<div class="block">Invalidates the cache entries for the specified keys.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>keys</code> - the keys to be invalidated.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="putAll(java.util.Map)">
<h3>putAll</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">putAll</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;? extends <a href="S3FCache.html" title="type parameter in S3FCache">K</a>,<wbr>? extends <a href="S3FCache.html" title="type parameter in S3FCache">V</a>&gt;&nbsp;map)</span></div>
<div class="block">Copies all the mappings from the specified map to the cache.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>map</code> - the map containing the mappings to be copied to the cache.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="size()">
<h3>size</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">size</span>()</div>
<div class="block">Returns the number of entries in the cache.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the number of entries in the cache.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="memorySize()">
<h3>memorySize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">memorySize</span>()</div>
<div class="block">Returns the memory size of the cache.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the memory size of the cache.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getKeys()">
<h3>getKeys</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="S3FCache.html" title="type parameter in S3FCache">K</a>&gt;</span>&nbsp;<span class="element-name">getKeys</span>()</div>
<div class="block">Returns the set of keys in the cache.
 Does not contain the keys in the ghost queue.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the set of keys in the cache.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getGhostKeySet()">
<h3>getGhostKeySet</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/HashSet.html" title="class or interface in java.util" class="external-link">HashSet</a>&lt;<a href="S3FCache.html" title="type parameter in S3FCache">K</a>&gt;</span>&nbsp;<span class="element-name">getGhostKeySet</span>()</div>
<div class="block">Returns the set of keys in the ghost queue.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the set of keys in the ghost queue.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setMaxWeight(int)">
<h3>setMaxWeight</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">setMaxWeight</span><wbr><span class="parameters">(int&nbsp;maxWeight)</span></div>
<div class="block">Set new max weight for the cache.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>old max weight.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMaxWeight()">
<h3>getMaxWeight</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getMaxWeight</span>()</div>
<div class="block">Get the max weight for the cache.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>max weight.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setQueueSizes(int,int,int)">
<h3>setQueueSizes</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setQueueSizes</span><wbr><span class="parameters">(int&nbsp;bigQueueSize,
 int&nbsp;smallQueueSize,
 int&nbsp;ghostQueueSize)</span></div>
<div class="block">Set custom sizes for the queues.
 All size are optional.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>bigQueueSize</code> - the size of the big queue.</dd>
<dd><code>smallQueueSize</code> - the size of the small queue.</dd>
<dd><code>ghostQueueSize</code> - the size of the ghost queue.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setBigQueueSize(int)">
<h3>setBigQueueSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setBigQueueSize</span><wbr><span class="parameters">(int&nbsp;bigQueueSize)</span></div>
<div class="block">Set the size of the big queue.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>bigQueueSize</code> - the size of the big queue.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setSmallQueueSize(int)">
<h3>setSmallQueueSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setSmallQueueSize</span><wbr><span class="parameters">(int&nbsp;smallQueueSize)</span></div>
<div class="block">Set the size of the small queue.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>smallQueueSize</code> - the size of the small queue.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setGhostQueueSize(int)">
<h3>setGhostQueueSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setGhostQueueSize</span><wbr><span class="parameters">(int&nbsp;ghostQueueSize)</span></div>
<div class="block">Set the size of the ghost queue.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>ghostQueueSize</code> - the size of the ghost queue.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
